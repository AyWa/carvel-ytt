#@ load("@ytt:url", "url")

path_segment:
  test1: #@ url.path_segment_encode("path path/other")
  test2: #@ url.path_segment_decode("path%20path%2Fother")
  test3: #@ url.path_segment_encode("")
  test4: #@ url.path_segment_decode("")

query_param_value:
  test1: #@ url.query_param_value_encode("val val/other")
  test2: #@ url.query_param_value_decode("val+val%2Fother")
  test3: #@ url.query_param_value_encode("")
  test4: #@ url.query_param_value_decode("")

query_params:
  #! keys are sorted
  test1: #@ url.query_params_encode({"y":["2","3"],"x":["1"],"z":[""],"w":[]})
  test2: #@ url.query_params_decode("y=2&x=1&y=3;z")
  test3: #@ url.query_params_encode({"w":[]})
  test4: #@ url.query_params_decode("")

url_type:
  #@ testURL1 = url.parse("http://admin:password@url.domain:8080")
  #@ testURL2 = testURL1.without_user()
  #@ testURL3 = url.parse("http://admin@url.domain:8080")
  test1: #@ testURL1
  test2: #@ testURL1.user
  test3: #@ testURL1.user.name
  test4: #@ testURL1.user.password
  test5: #@ testURL2
  test6: #@ testURL2.user
  test7: #@ testURL3
  test8: #@ testURL3.user
  test9: #@ testURL3.user.name
  test10: #@ testURL3.user.password

+++

path_segment:
  test1: path%20path%2Fother
  test2: path path/other
  test3: ""
  test4: ""
query_param_value:
  test1: val+val%2Fother
  test2: val val/other
  test3: ""
  test4: ""
query_params:
  test1: x=1&y=2&y=3&z=
  test2:
    x:
    - "1"
    "y":
    - "2"
    - "3"
    z:
    - ""
  test3: ""
  test4: {}
url_type:
  test1: http://admin:password@url.domain:8080
  test2: admin:password
  test3: admin
  test4: password
  test5: http://url.domain:8080
  test6: null
  test7: http://admin@url.domain:8080
  test8: admin
  test9: admin
  test10: null
